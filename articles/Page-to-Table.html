<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tmtyro">
<title>Page to Table • tmtyro</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Page to Table">
<meta property="og:description" content="tmtyro">
<meta property="og:image" content="https://jmclawson.github.io/tmtyro/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tmtyro</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Counts-Columns-and-Clouds.html">Counts, Columns, and Clouds</a>
    <a class="dropdown-item" href="../articles/Page-to-Table.html">Page to Table</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jmclawson/tmtyro/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Page to Table</h1>
            <h3 data-toc-skip class="subtitle">Adding Structure Where It
Wasn’t</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jmclawson/tmtyro/blob/HEAD/vignettes/articles/Page-to-Table.Rmd" class="external-link"><code>vignettes/articles/Page-to-Table.Rmd</code></a></small>
      <div class="d-none name"><code>Page-to-Table.Rmd</code></div>
    </div>

    
    
<p>There are certain considerations to keep in mind when working with
text in any kind of analysis. Text is often called “unstructured data”
because it resists techniques that work on other kinds of data. With
little effort, we can add structure by reading text data into a table
structure.</p>
<div class="section level2">
<h2 id="the-easy-way-with-tmtyro">The easy way with <code>tmtyro</code><a class="anchor" aria-label="anchor" href="#the-easy-way-with-tmtyro"></a>
</h2>
<div class="section level3">
<h3 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h3>
<p>It’s best to start by loading any necessary package using the
<code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> function. The <code>tmtyro</code> package
provides many simple functions for working with text, so it’s loaded
here:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jmclawson/tmtyro" class="external-link">tmtyro</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-load_texts">Using <code>load_texts()</code><a class="anchor" aria-label="anchor" href="#using-load_texts"></a>
</h3>
<p>With <code>tmtyro</code> loaded, its tools are available. First of
these is the <code><a href="../reference/load_texts.html">load_texts()</a></code> function, designed to load a
folder of texts. To use it, copy any “.txt” files you wish to study into
a directory in your project. By default, <code><a href="../reference/load_texts.html">load_texts()</a></code> will
look for a folder called <strong>data/</strong> underneath the current
directory, but we can tell it to look elsewhere.</p>
<p>For this example, all of Jane Austen’s novels have been saved in a
folder called <strong>austen</strong>, so this location will be added to
the <code><a href="../reference/load_texts.html">load_texts()</a></code> function. To save and work with these
texts later, the results need to be assigned to a named object. The code
here uses an assignment arrow <code>&lt;-</code> to assign the table to
the name <code>austen_texts</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">austen_texts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_texts.html">load_texts</a></span><span class="op">(</span><span class="st">"austen/"</span><span class="op">)</span></span></code></pre></div>
<p>Once it has a name, this table can be viewed by typing its name to
see the whole thing. The <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> function is also useful to
show just the first few rows.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">austen_texts</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   doc_id par_num word     </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> emma         1 volume   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> emma         1 i        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> emma         2 chapter  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> emma         2 i        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> emma         3 emma     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> emma         3 woodhouse</span></span></code></pre></div>
<p>By default, <code><a href="../reference/load_texts.html">load_texts()</a></code> prepares three columns:</p>
<ol style="list-style-type: decimal">
<li>
<code>doc_id</code> indicates the file name. Think of it as the
document ID or title.</li>
<li>
<code>par_num</code> indicates the paragraph number. Think of it as
a local context, in case you ever want to use it.</li>
<li>
<code>word</code> divides the text one word per row, all lowercase.
Think of it as letting you read a book by going top to bottom, instead
of left to right.</li>
</ol>
<p>At this point, we’re done! Having texts loaded into a table adds
structure, making it easier to apply some common methods of data
analysis. And <code>tmtyro</code>’s <code><a href="../reference/load_texts.html">load_texts()</a></code> simplified
many steps along the way.</p>
</div>
</div>
<div class="section level2">
<h2 id="the-hard-way">The hard way<a class="anchor" aria-label="anchor" href="#the-hard-way"></a>
</h2>
<p>Without resorting to other packages, it can be tough to effect the
same table. The best might be to build up multiple tables, with one for
each file, and then to stick them together in one combined table.</p>
<div class="section level3">
<h3 id="reading-a-file">Reading a file<a class="anchor" aria-label="anchor" href="#reading-a-file"></a>
</h3>
<p>The first step is to read a text file into a table. The
<code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble()</a></code> function from the <code>tibble</code> package and
the <code><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines()</a></code> functions make this possible:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">emma</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  doc_id <span class="op">=</span> <span class="st">"emma"</span>,</span>
<span>  text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"austen/emma.txt"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">emma</span>, n <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 2</span></span></span>
<span><span class="co">#&gt;    doc_id text                                                                  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> emma   <span style="color: #949494;">""</span>                                                                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> emma   <span style="color: #949494;">""</span>                                                                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> emma   <span style="color: #949494;">"</span>VOLUME I<span style="color: #949494;">"</span>                                                            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> emma   <span style="color: #949494;">""</span>                                                                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> emma   <span style="color: #949494;">""</span>                                                                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> emma   <span style="color: #949494;">""</span>                                                                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> emma   <span style="color: #949494;">""</span>                                                                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> emma   <span style="color: #949494;">"</span>CHAPTER I<span style="color: #949494;">"</span>                                                           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> emma   <span style="color: #949494;">""</span>                                                                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> emma   <span style="color: #949494;">""</span>                                                                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> emma   <span style="color: #949494;">"</span>Emma Woodhouse, handsome, clever, and rich, with a comfortable home …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> emma   <span style="color: #949494;">"</span>happy disposition, seemed to unite some of the best blessings of<span style="color: #949494;">"</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> emma   <span style="color: #949494;">"</span>existence; and had lived nearly twenty-one years in the world with v…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> emma   <span style="color: #949494;">"</span>little to distress or vex her.<span style="color: #949494;">"</span>                                      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> emma   <span style="color: #949494;">""</span></span></span></code></pre></div>
<p>Because we’ve used the assignment arrow <code>&lt;-</code> to assign
the table to the name <code>emma</code>, we can reference it in later
steps and even overwrite it by saving over the name.</p>
</div>
<div class="section level3">
<h3 id="counting-paragraphs">Counting Paragraphs<a class="anchor" aria-label="anchor" href="#counting-paragraphs"></a>
</h3>
<p>This option results in a table with a lot of empty lines and without
paragraph markers, but these can be corrected. The <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code>
function of the <code>dplyr</code> package eases the process of adding a
new column, such as for paragraph numbering. And blank lines offer a
good way of counting paragraphs, using the <code><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum()</a></code>
function to keep a running tally:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span></span>
<span><span class="va">emma</span> <span class="op">&lt;-</span> <span class="va">emma</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>par_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">text</span> <span class="op">==</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">emma</span>, n <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 3</span></span></span>
<span><span class="co">#&gt;    doc_id text                                                           par_num</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> emma   <span style="color: #949494;">""</span>                                                                   1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> emma   <span style="color: #949494;">""</span>                                                                   2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> emma   <span style="color: #949494;">"</span>VOLUME I<span style="color: #949494;">"</span>                                                           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> emma   <span style="color: #949494;">""</span>                                                                   3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> emma   <span style="color: #949494;">""</span>                                                                   4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> emma   <span style="color: #949494;">""</span>                                                                   5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> emma   <span style="color: #949494;">""</span>                                                                   6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> emma   <span style="color: #949494;">"</span>CHAPTER I<span style="color: #949494;">"</span>                                                          6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> emma   <span style="color: #949494;">""</span>                                                                   7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> emma   <span style="color: #949494;">""</span>                                                                   8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> emma   <span style="color: #949494;">"</span>Emma Woodhouse, handsome, clever, and rich, with a comfortab…       8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> emma   <span style="color: #949494;">"</span>happy disposition, seemed to unite some of the best blessing…       8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> emma   <span style="color: #949494;">"</span>existence; and had lived nearly twenty-one years in the worl…       8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> emma   <span style="color: #949494;">"</span>little to distress or vex her.<span style="color: #949494;">"</span>                                     8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> emma   <span style="color: #949494;">""</span>                                                                   9</span></span></code></pre></div>
<p>This code also chunk shows the pipe <code>|&gt;</code> to be handy
for passing one step to the next. Effectively, it means that the result
of everything <em>before</em> the pipe <code>|&gt;</code> gets placed
inside the parentheses of whatever function comes <em>after</em> the
pipe <code>|&gt;</code>.</p>
</div>
<div class="section level3">
<h3 id="dropping-empty-lines">Dropping empty lines<a class="anchor" aria-label="anchor" href="#dropping-empty-lines"></a>
</h3>
<p>It’s still not quite right, since all of the blank lines are being
counted. So we’ll drop all the blank lines and recount using a different
measurement. First things first—the <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> function from
<code>dplyr</code> makes it easy to select or to drop rows that meet
some criteria. We’ll tell it here to find rows that <em>don’t</em> have
a blank in the <code>text</code> column:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">emma</span> <span class="op">&lt;-</span> <span class="va">emma</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">text</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">emma</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   doc_id text                                                            par_num</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> emma   VOLUME I                                                              2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> emma   CHAPTER I                                                             6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> emma   Emma Woodhouse, handsome, clever, and rich, with a comfortable…       8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> emma   happy disposition, seemed to unite some of the best blessings …       8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> emma   existence; and had lived nearly twenty-one years in the world …       8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> emma   little to distress or vex her.                                        8</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="correcting-the-count">Correcting the count<a class="anchor" aria-label="anchor" href="#correcting-the-count"></a>
</h3>
<p>The blank lines have been eradicated, but the paragraph numbers are
now wrong. Using the <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag()</a></code> function from <code>dplyr</code>
makes it easy to compare one cell with the value above it. Effectively,
we’re going to make a new running tally of every time the paragraph
number changes using <code><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum()</a></code>. We could do all of this in
one step, but it may make more sense to separate it out into multiple
columns:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">emma</span> <span class="op">&lt;-</span> <span class="va">emma</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    lag_num <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">par_num</span><span class="op">)</span>,</span>
<span>    new_par <span class="op">=</span> <span class="va">lag_num</span> <span class="op">!=</span> <span class="va">par_num</span>,</span>
<span>    adj_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">new_par</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">emma</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   doc_id text                                    par_num lag_num new_par adj_num</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> emma   VOLUME I                                      2      <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> emma   CHAPTER I                                     6       2 TRUE         <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> emma   Emma Woodhouse, handsome, clever, and …       8       6 TRUE         <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> emma   happy disposition, seemed to unite som…       8       8 FALSE        <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> emma   existence; and had lived nearly twenty…       8       8 FALSE        <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> emma   little to distress or vex her.                8       8 FALSE        <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>This step <em>almost</em> works, but the <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag()</a></code> has
nowhere to look to get a value for the first row. Lacking that, it
returns an empty string. We’ll need to add one more step to change the
empty string into a zero. Piping <code>lag_num</code> into a logical
test (<code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code>) lets us check to see if it’s empty
(<code>NA</code>), returning a <code>TRUE</code> if so. Then,
<code><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse()</a></code> branches the code in two directions: if
<code>lag(par_num)</code> is empty, it will return the value
<code>0</code>, but if it’s not, it will return the value itself:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">emma</span> <span class="op">&lt;-</span> <span class="va">emma</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    lag_num <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">par_num</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">par_num</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    new_par <span class="op">=</span> <span class="va">lag_num</span> <span class="op">!=</span> <span class="va">par_num</span>,</span>
<span>    adj_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">new_par</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">emma</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   doc_id text                                    par_num lag_num new_par adj_num</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> emma   VOLUME I                                      2       0 TRUE          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> emma   CHAPTER I                                     6       2 TRUE          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> emma   Emma Woodhouse, handsome, clever, and …       8       6 TRUE          3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> emma   happy disposition, seemed to unite som…       8       8 FALSE         3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> emma   existence; and had lived nearly twenty…       8       8 FALSE         3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> emma   little to distress or vex her.                8       8 FALSE         3</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="selecting-reordering-and-renaming-columns">Selecting, reordering, and renaming columns<a class="anchor" aria-label="anchor" href="#selecting-reordering-and-renaming-columns"></a>
</h3>
<p>This new <code>adj_num</code> column looks right. Every new paragraph
has a new number, and they progress as we’d expect. The other columns
aren’t needed, though, so we can drop the old <code>par_num</code>,
<code>lag_num</code>, and <code>new_par</code> columns and then rename
<code>adj_num</code> as <code>lag_num</code>. The <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code>
function from <code>dplyr</code> is the easiest way to choose which
columns we want to keep and the order we want to keep them. We can also
rename columns as we select them, so we’ll take the opportunity to
rename <code>adj_num</code> as <code>par_num</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">emma</span> <span class="op">&lt;-</span> <span class="va">emma</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">doc_id</span>,</span>
<span>         par_num <span class="op">=</span> <span class="va">adj_num</span>,</span>
<span>         <span class="va">text</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">emma</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   doc_id par_num text                                                           </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> emma         1 VOLUME I                                                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> emma         2 CHAPTER I                                                      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> emma         3 Emma Woodhouse, handsome, clever, and rich, with a comfortable…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> emma         3 happy disposition, seemed to unite some of the best blessings …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> emma         3 existence; and had lived nearly twenty-one years in the world …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> emma         3 little to distress or vex her.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="unnesting-words">Unnesting words<a class="anchor" aria-label="anchor" href="#unnesting-words"></a>
</h3>
<p>The final step is to “unnest” the lines of text to have just one word
per row. While we’re at it, we might as well convert the words to
lowercase. The handy <code>tidytext</code> package has just the function
we need in <code><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html" class="external-link">unnest_tokens()</a></code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/juliasilge/tidytext" class="external-link">tidytext</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">emma</span> <span class="op">&lt;-</span> <span class="va">emma</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html" class="external-link">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, </span>
<span>                input <span class="op">=</span> <span class="va">text</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">emma</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   doc_id par_num word     </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> emma         1 volume   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> emma         1 i        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> emma         2 chapter  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> emma         2 i        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> emma         3 emma     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> emma         3 woodhouse</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="putting-it-all-together">Putting it all together<a class="anchor" aria-label="anchor" href="#putting-it-all-together"></a>
</h3>
<p>We’ve successfully loaded up one text the hard way! Let’s put it all
in one step to see what it takes:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">emma</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  doc_id <span class="op">=</span> <span class="st">"emma"</span>,</span>
<span>  text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"austen/emma.txt"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>par_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">text</span> <span class="op">==</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">text</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    lag_num <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">par_num</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">par_num</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    new_par <span class="op">=</span> <span class="va">lag_num</span> <span class="op">!=</span> <span class="va">par_num</span>,</span>
<span>    adj_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">new_par</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">doc_id</span>,</span>
<span>         par_num <span class="op">=</span> <span class="va">adj_num</span>,</span>
<span>         <span class="va">text</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html" class="external-link">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, </span>
<span>                input <span class="op">=</span> <span class="va">text</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="repeating-for-other-files">Repeating for other files<a class="anchor" aria-label="anchor" href="#repeating-for-other-files"></a>
</h3>
<p>To load an entire folder of texts, we need to repeat this process for
each and then combine the tables. Instead of doing this whole thing for
every text in our data set, let’s just do it for one additional novel.
In the first couple lines, the <code>doc_id</code> will need to be
adjusted, and the filename will need to point to the new text:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">persuasion</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  doc_id <span class="op">=</span> <span class="st">"persuasion"</span>,</span>
<span>  text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"austen/persuasion.txt"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>par_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">text</span> <span class="op">==</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">text</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    lag_num <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">par_num</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">par_num</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    new_par <span class="op">=</span> <span class="va">lag_num</span> <span class="op">!=</span> <span class="va">par_num</span>,</span>
<span>    adj_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">new_par</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">doc_id</span>,</span>
<span>         par_num <span class="op">=</span> <span class="va">adj_num</span>,</span>
<span>         <span class="va">text</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html" class="external-link">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, </span>
<span>                input <span class="op">=</span> <span class="va">text</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="combining-multiple-tables">Combining multiple tables<a class="anchor" aria-label="anchor" href="#combining-multiple-tables"></a>
</h3>
<p>Once multiple texts are loaded up, they can be combined into one
table with <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind()</a></code> to bind the rows together:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">emma</span>, <span class="va">persuasion</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">combo</span><span class="op">)</span></span>
<span><span class="co">#&gt;   doc_id par_num      word</span></span>
<span><span class="co">#&gt; 1   emma       1    volume</span></span>
<span><span class="co">#&gt; 2   emma       1         i</span></span>
<span><span class="co">#&gt; 3   emma       2   chapter</span></span>
<span><span class="co">#&gt; 4   emma       2         i</span></span>
<span><span class="co">#&gt; 5   emma       3      emma</span></span>
<span><span class="co">#&gt; 6   emma       3 woodhouse</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">combo</span><span class="op">)</span></span>
<span><span class="co">#&gt;            doc_id par_num       word</span></span>
<span><span class="co">#&gt; 244640 persuasion    1034       than</span></span>
<span><span class="co">#&gt; 244641 persuasion    1034         in</span></span>
<span><span class="co">#&gt; 244642 persuasion    1034        its</span></span>
<span><span class="co">#&gt; 244643 persuasion    1034   national</span></span>
<span><span class="co">#&gt; 244644 persuasion    1034 importance</span></span>
<span><span class="co">#&gt; 244645 persuasion    1035      finis</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="reviewing-the-easy-way">Reviewing the easy way<a class="anchor" aria-label="anchor" href="#reviewing-the-easy-way"></a>
</h2>
<p>The “hard” way of loading texts can take about 33 lines of code to
load two files and combine them, with more lines as the number of files
grows. The “easy” way using <code>tmtyro</code> takes just one line of
code to prepare as many files as are in a folder:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">austen_texts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_texts.html">load_texts</a></span><span class="op">(</span><span class="st">"austen/"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">austen_texts</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   doc_id par_num word     </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> emma         1 volume   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> emma         1 i        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> emma         2 chapter  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> emma         2 i        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> emma         3 emma     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> emma         3 woodhouse</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">austen_texts</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   doc_id                par_num word    </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> sense_and_sensibility    <span style="text-decoration: underline;">1</span>858 coolness</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> sense_and_sensibility    <span style="text-decoration: underline;">1</span>858 between </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> sense_and_sensibility    <span style="text-decoration: underline;">1</span>858 their   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> sense_and_sensibility    <span style="text-decoration: underline;">1</span>858 husbands</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> sense_and_sensibility    <span style="text-decoration: underline;">1</span>859 the     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> sense_and_sensibility    <span style="text-decoration: underline;">1</span>859 end</span></span></code></pre></div>
<div class="section level3">
<h3 id="say-more-do-less">Say more, do less<a class="anchor" aria-label="anchor" href="#say-more-do-less"></a>
</h3>
<p>By default, <code><a href="../reference/load_texts.html">load_texts()</a></code> will load and process an entire
folder of texts. But by adjusting a few options, we can convince it to
do less. We can, for instance, load a single file by describing part of
the file name:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/load_texts.html">load_texts</a></span><span class="op">(</span><span class="st">"austen/"</span>,</span>
<span>           name <span class="op">=</span> <span class="st">"emma"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   doc_id par_num word     </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> emma         1 volume   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> emma         1 i        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> emma         2 chapter  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> emma         2 i        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> emma         3 emma     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> emma         3 woodhouse</span></span></code></pre></div>
<p>(Because this version of the table hasn’t been assigned a name with
the assignment arrow <code>&lt;-</code>, it hasn’t been saved and exists
only as a fleeting memory.)</p>
<p>By changing some options, <code><a href="../reference/load_texts.html">load_texts()</a></code> will skip some of
these transformations, presenting texts in mixed case and with one line
per row in a column called <code>text</code>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/load_texts.html">load_texts</a></span><span class="op">(</span><span class="st">"austen/"</span>, </span>
<span>           word <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           to_lower <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   doc_id par_num text                                                           </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> emma         1 VOLUME I                                                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> emma         2 CHAPTER I                                                      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> emma         3 Emma Woodhouse, handsome, clever, and rich, with a comfortable…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> emma         3 happy disposition, seemed to unite some of the best blessings …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> emma         3 existence; and had lived nearly twenty-one years in the world …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> emma         3 little to distress or vex her.</span></span></code></pre></div>
<p>There are other options available, too, but they deserve closer
consideration than can be offered in an introduction such as this
one.</p>
</div>
<div class="section level3">
<h3 id="summary-of-documents">Summary of documents<a class="anchor" aria-label="anchor" href="#summary-of-documents"></a>
</h3>
<p>Once loaded, a corpus of texts offers many possibilities for further
study.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">austen_texts</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">doc_id</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>    paragraphs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">par_num</span><span class="op">)</span>,</span>
<span>    words <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/standardize_titles.html">standardize_titles</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>title <span class="op">=</span> <span class="va">doc_id</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 3</span></span></span>
<span><span class="co">#&gt;   title                 paragraphs  words</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Emma                        <span style="text-decoration: underline;">2</span>375 <span style="text-decoration: underline;">160</span>992</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Lady Susan                   225  <span style="text-decoration: underline;">23</span>144</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Mansfield Park              <span style="text-decoration: underline;">1</span>839 <span style="text-decoration: underline;">160</span>454</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Northanger                  <span style="text-decoration: underline;">1</span>052  <span style="text-decoration: underline;">77</span>594</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Persuasion                  <span style="text-decoration: underline;">1</span>035  <span style="text-decoration: underline;">83</span>653</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Pride and Prejudice         <span style="text-decoration: underline;">2</span>121 <span style="text-decoration: underline;">122</span>292</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Sense and Sensibility       <span style="text-decoration: underline;">1</span>859 <span style="text-decoration: underline;">119</span>946</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by James Clawson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
